è·³è‡³å…§å®¹
èŠå¤©æ­·ç¨‹ç´€éŒ„

ä½ èªªï¼š
api-list.json
æª”æ¡ˆ
index.html
æª”æ¡ˆ
è½‰åŒ–è¡¨æ ¼é¡¯ç¤ºçš„æ•ˆæœæœ‰é»äº‚,è€Œä¸”æ²’æœ‰å…§å»ºæ»¾å‹•å¼æ²è»¸
ChatGPT èªªï¼š
æˆ‘æª¢æŸ¥äº†ä½ çš„ index.htmlï¼ˆAPI Dropdown Demoï¼‰å¾Œï¼Œç™¼ç¾è¡¨æ ¼é¡¯ç¤ºäº‚æ‰ã€è€Œä¸”æ²’æœ‰ã€Œå…§å»ºæ»¾å‹•æ²è»¸ã€çš„å•é¡Œï¼Œä¸»è¦æ˜¯å› ç‚ºç›®å‰ .output-container å’Œ .table-view éƒ½æ˜¯ç›´æ¥æ’é–‹ <table>ï¼Œæ²’æœ‰é™åˆ¶å¯¬åº¦/é«˜åº¦èˆ‡ overflow æ§åˆ¶
ã€‚

âœ… è§£æ±ºæ–¹æ¡ˆ
åœ¨ CSS åŠ ä¸Šå›ºå®šé«˜åº¦èˆ‡æ»¾å‹•è¨­å®šï¼Œè®“è¡¨æ ¼è¶…éæ™‚æœƒè‡ªå‹•å‡ºç¾æ»¾å‹•æ²è»¸ï¼š

.table-view {
    background: white;
    color: #333;
    border: 1px solid #ddd;
    border-radius: 4px;
    overflow: auto;   /* â† å•Ÿç”¨æ²è»¸ */
    max-height: 70vh; /* â† é™åˆ¶è¡¨æ ¼é«˜åº¦ */
    max-width: 100%;  /* â† é™åˆ¶è¡¨æ ¼å¯¬åº¦ */
}

.table-view table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
    table-layout: auto; /* è‡ªå‹•åˆ†é…æ¬„å¯¬ */
}

.table-view th, .table-view td {
    padding: 8px 12px;
    text-align: left;
    border-bottom: 1px solid #eee;
    white-space: nowrap;   /* ä¸è¦è‡ªå‹•æ›è¡Œ */
}

.table-view .url-cell {
    word-break: break-all;
    max-width: 400px;
    white-space: normal;  /* URL å¤ªé•·æ‰å…è¨±æ›è¡Œ */
}
ğŸ”§ ä½ æœƒå¾—åˆ°çš„æ•ˆæœ
å‚ç›´æ²è»¸ï¼šè¡¨æ ¼è¶…é 70vh å°±æœƒå‡ºç¾ä¸Šä¸‹æ»¾å‹•ã€‚

æ°´å¹³æ²è»¸ï¼šè‹¥æ¬„ä½å¤ªå¤šæˆ– URL å¤ªé•·ï¼Œæœƒè‡ªå‹•ç”¢ç”Ÿå·¦å³æ»¾å‹•ã€‚

æ›´æ¸…æ™°çš„æ¬„ä½æ’ç‰ˆï¼šç”¨ white-space: nowrap æ§åˆ¶æ¬„ä½ä¸äº‚æ–·è¡Œï¼Œä½†å° URL é¡æ¬„ä½é–‹æ”¾ normal ä»¥é¿å…éåº¦çˆ†è¡¨ã€‚

è¦ä¸è¦æˆ‘å¹«ä½ ç›´æ¥æ”¹å¥½ index.html çš„ CSS å€å¡Šï¼Œä¸¦é™„ä¸Šä¿®æ”¹å¾Œçš„å®Œæ•´æª”æ¡ˆç‰ˆæœ¬ï¼ˆä½ ç›´æ¥è¦†è“‹å°±èƒ½çœ‹åˆ°æ²è»¸æ•ˆæœï¼‰ï¼Ÿ


è³‡æ–™ä¾†æº
ä½ èªªï¼š
ç›´æ¥æ”¹å¥½ index.html çš„ CSS å€å¡Šï¼Œä¸¦é™„ä¸Šä¿®æ”¹å¾Œçš„å®Œæ•´æª”æ¡ˆç‰ˆæœ¬ï¼ˆä½ ç›´æ¥è¦†è“‹å°±èƒ½çœ‹åˆ°æ²è»¸æ•ˆæœï¼‰ï¼Ÿ\
ChatGPT èªªï¼š
å¥½çš„ï¼Œå°æ¹¯å§†ã€‚å·²æŠŠä½ çš„ index.html ç›´æ¥æ”¹å¥½ï¼ˆåªèª¿æ•´ CSS èˆ‡æ¥µå°‘é‡ JS å›å‚³ HTML çµæ§‹ï¼Œå…¶ä»–é‚è¼¯ä¸å‹•ï¼‰ï¼ŒåŠ ä¸Šã€Œå…§å»ºå‚ç›´ï¼æ°´å¹³æ²è»¸ã€èˆ‡ã€Œè¡¨é ­ç½®é ‚ã€ï¼Œä¸¦è®“é•·ç¶²å€èˆ‡å¤šæ¬„ä½æ™‚ä¸æœƒæ’çˆ†ç‰ˆé¢ã€‚æŠŠä¸‹é¢æ•´ä»½è¦†è“‹ä½ çš„æª”æ¡ˆå³å¯çœ‹åˆ°æ”¹å–„æ•ˆæœï¼ˆæˆ‘ä»¥ä½ å…ˆå‰æä¾›çš„åŸå§‹ç‰ˆæœ¬ç‚ºåŸºç¤ä¿®æ”¹ï¼‰ã€‚

<!doctype html>
<html lang="zh-Hant">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>API Dropdown Demo</title>
    <style>
        /* ====== åŸºæœ¬æ’ç‰ˆ ====== */
        body {
            font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans TC', Arial, sans-serif;
            padding: 24px;
        }
        .row {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }
        select, input[type=text] {
            padding: 8px 10px;
        }
        .muted { color: #666; }
        .view-toggle {
            margin-top: 8px;
            display: flex;
            gap: 8px;
        }
        .view-toggle button {
            padding: 6px 12px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 3px;
            font-size: 12px;
        }
        .view-toggle button.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        .filter-controls {
            margin-bottom: 12px;
        }
        .filter-controls input {
            padding: 6px 10px;
            width: 200px;
            font-size: 12px;
        }
        .stats {
            margin-left: 8px;
            font-size: 12px;
            color: #666;
        }

        /* ====== è¼¸å‡ºå®¹å™¨ï¼ˆJSON/è¡¨æ ¼å…±ç”¨ï¼‰====== */
        .output-container {
            /* è®“å…§å®¹åœ¨è¦–çª—å…§å¯æ»¾å‹•ï¼ˆJSON & è¡¨æ ¼ï¼‰ */
            background: #111;
            color: #0f0;
            padding: 12px;
            border-radius: 6px;
            margin-top: 12px;

            /* é—œéµï¼šé™åˆ¶é«˜åº¦ + å•Ÿç”¨æ²è»¸ */
            max-height: 70vh;
            overflow: auto;

            /* è®“æ‰‹æ©Ÿä¹Ÿå¥½ç”¨ */
            -webkit-overflow-scrolling: touch;
        }
        .json-display {
            font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre;           /* ä¿ç•™ç­‰å¯¬æ ¼å¼ */
        }

        /* ====== è¡¨æ ¼è¦–åœ–å¤–è§€ ====== */
        .table-view {
            background: #fff;
            color: #333;
            border: 1px solid #ddd;
            border-radius: 6px;

            /* è®“å¤–å±¤ä¹Ÿå¯æ²ï¼ˆä¿éšªï¼‰ */
            overflow: auto;
        }

        /* å…§å±¤å†åŒ…ä¸€å±¤ï¼Œå°ˆè²¬æ°´å¹³/å‚ç›´æ»¾å‹•ï¼Œé¿å… sticky å¤±æ•ˆ */
        .table-scroller {
            overflow: auto;        /* é—œéµï¼šæ°´å¹³ + å‚ç›´æ²è»¸ */
            max-height: 70vh;      /* èˆ‡å¤–å±¤ä¸€è‡´ */
            min-height: 240px;     /* å¤ªå°‘åˆ—æ™‚ä¿æŒè¦–è¦ºç©©å®š */
        }

        .table-view table {
            width: max(100%, 960px);  /* é¿å…æ¬„å¤šæ™‚æ“ çˆ†ï¼›å¿…è¦æ™‚æ©«å‘æ²å‹• */
            border-collapse: collapse;
            font-size: 13px;
            table-layout: auto;       /* è‡ªå‹•åˆ†é…æ¬„å¯¬ */
        }
        .table-view th,
        .table-view td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #eee;

            /* é è¨­ï¼šä¸æ›è¡Œ + çœç•¥è™Ÿï¼Œé¿å…è¡¨æ ¼çŒ›è·³è¡Œ */
            white-space: nowrap;
            max-width: 360px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .table-view th {
            background: #f8f9fa;
            font-weight: 600;
            color: #555;
            position: sticky;  /* è¡¨é ­ç½®é ‚ */
            top: 0;
            z-index: 1;
        }
        .table-view tr:hover {
            background: #f5f5f5;
        }

        /* æ¬„ä½èªæ„åŒ–èª¿æ•´ */
        .table-view .url-cell {
            font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
            font-size: 11px;
            color: #0a58ca;
            /* URL å¤ªé•·æ™‚å…è¨±æ–·è¡Œï¼›åŒæ™‚æ”¯æ´æ°´å¹³æ²è»¸ */
            white-space: normal;
            word-break: break-all;
            max-width: 560px;
        }
        .table-view .name-cell { font-weight: 500; }
        .table-view .id-cell {
            font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
            color: #666;
            font-size: 11px;
        }
    </style>
</head>

<body>
    <h1>API Dropdown Demo</h1>
    <p class="muted">Workerï¼š<code>https://cors-proxy.s01yg3642.workers.dev/</code> ï½œ è³‡æ–™ï¼š<code>api-list.json</code></p>

    <div class="row">
        <input id="q" type="text" placeholder="è¼¸å…¥é—œéµå­—ç¯©é¸ï¼ˆåç¨±æˆ–ç¶²å€ï¼‰" />
        <select id="sel"></select>
        <button id="go">Fetch</button>
    </div>

    <div class="view-toggle">
        <button id="jsonView" class="active">JSON æª¢è¦–</button>
        <button id="tableView">è¡¨æ ¼æª¢è¦–</button>
    </div>

    <div class="filter-controls" id="filterControls" style="display: none;">
        <input id="tableFilter" type="text" placeholder="ç¯©é¸è¡¨æ ¼å…§å®¹..." />
        <span class="stats" id="tableStats"></span>
    </div>

    <div class="output-container">
        <div id="out" class="json-display">// ç­‰å¾…è«‹æ±‚ä¸­â€¦</div>
    </div>

    <script type="module">
        const WORKER = "https://cors-proxy.s01yg3642.workers.dev/";
        /* è‹¥ä½ çš„ api-list.json èˆ‡ index.html åŒè³‡æ–™å¤¾ï¼Œå»ºè­°ç”¨ç›¸å°è·¯å¾‘ï¼š */
        const listUrl = "./api-list.json"; // åŸæœ¬æ˜¯ "./.VSCODE/api-list.json"

        const toProxy = (u) => WORKER + "?url=" + encodeURIComponent(u);

        const out = document.getElementById('out');
        const sel = document.getElementById('sel');
        const q = document.getElementById('q');
        const jsonViewBtn = document.getElementById('jsonView');
        const tableViewBtn = document.getElementById('tableView');
        const filterControls = document.getElementById('filterControls');
        const tableFilter = document.getElementById('tableFilter');
        const tableStats = document.getElementById('tableStats');

        let items = [];
        let currentData = null;
        let currentView = 'json';

        function fill(list) {
            sel.innerHTML = "";
            for (const it of list) {
                const o = document.createElement('option');
                o.value = it.url;
                o.textContent = (it.category ? `[${it.category}] ` : "") + it.name;
                sel.appendChild(o);
            }
        }

        async function load() {
            const res = await fetch(listUrl);
            const data = await res.json();
            items = data.items || [];
            fill(items);
            if (items.length) await run(items[0].url);
        }

        q.addEventListener('input', () => {
            const s = q.value.trim().toLowerCase();
            if (!s) return fill(items);
            const f = items.filter(it =>
                (it.name || "").toLowerCase().includes(s) ||
                (it.url || "").toLowerCase().includes(s)
            );
            fill(f);
        });

        function isArrayOfObjects(data) {
            return Array.isArray(data) && data.length > 0 && typeof data[0] === 'object' && data[0] !== null;
        }

        function renderAsTable(data) {
            if (!isArrayOfObjects(data)) {
                return '<div class="json-display">' + escapeHtml(JSON.stringify(data, null, 2)) + '</div>';
            }
            const headers = Object.keys(data[0]);

            // åŒ…ä¸€å±¤ .table-scroller ä»¥ä¿è­‰æ²è»¸ & sticky header ç©©å®š
            const tableHtml = `
                <div class="table-scroller">
                    <table>
                        <thead>
                            <tr>${headers.map(h => `<th>${escapeHtml(h)}</th>`).join('')}</tr>
                        </thead>
                        <tbody>
                            ${data.map(row => `
                                <tr>
                                    ${headers.map(header => {
                                        const raw = row[header] ?? '';
                                        const value = String(raw);
                                        let cellClass = '';
                                        const hLower = header.toLowerCase();
                                        if (hLower.includes('url') || hLower.includes('link')) {
                                            cellClass = 'url-cell';
                                        } else if (hLower.includes('name') || hLower.includes('title')) {
                                            cellClass = 'name-cell';
                                        } else if (hLower === 'id' || hLower.endsWith('_id')) {
                                            cellClass = 'id-cell';
                                        }
                                        return `<td class="${cellClass}" title="${escapeHtml(value)}">${escapeHtml(value)}</td>`;
                                    }).join('')}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            return tableHtml;
        }

        function updateDisplay() {
            if (!currentData) return;

            const container = out.parentElement;

            if (currentView === 'table' && isArrayOfObjects(currentData)) {
                container.className = 'output-container table-view';
                out.innerHTML = renderAsTable(currentData);
                out.className = ''; // æ¸…æ‰ json çš„å­—å‹æ¨£å¼
                filterControls.style.display = 'block';
                updateTableStats(currentData);
            } else {
                container.className = 'output-container';
                out.className = 'json-display';
                const displayText = typeof currentData === 'string'
                    ? currentData
                    : JSON.stringify(currentData, null, 2);
                out.textContent = displayText;
                filterControls.style.display = 'none';
            }
        }

        function updateTableStats(data) {
            if (isArrayOfObjects(data)) {
                tableStats.textContent = `å…± ${data.length} ç­†è¨˜éŒ„ï¼Œ${Object.keys(data[0]).length} å€‹æ¬„ä½`;
            }
        }

        function filterTable() {
            if (!currentData || !isArrayOfObjects(currentData)) return;

            const filterText = tableFilter.value.toLowerCase();
            if (!filterText) {
                updateDisplay();
                return;
            }

            const filteredData = currentData.filter(row =>
                Object.values(row).some(value =>
                    String(value).toLowerCase().includes(filterText)
                )
            );

            const container = out.parentElement;
            container.className = 'output-container table-view';
            out.innerHTML = renderAsTable(filteredData);
            tableStats.textContent = `é¡¯ç¤º ${filteredData.length} / ${currentData.length} ç­†è¨˜éŒ„`;
        }

        async function run(url) {
            out.textContent = "// Fetching...\n" + url;
            try {
                const res = await fetch(toProxy(url));
                const ct = res.headers.get('content-type') || "";
                if (ct.includes("application/json")) {
                    currentData = await res.json();
                } else {
                    currentData = await res.text();
                }
                updateDisplay();
            } catch (e) {
                currentData = "Error: " + e.message;
                updateDisplay();
            }
        }

        // è¦–åœ–åˆ‡æ›
        jsonViewBtn.addEventListener('click', () => {
            currentView = 'json';
            jsonViewBtn.classList.add('active');
            tableViewBtn.classList.remove('active');
            updateDisplay();
        });
        tableViewBtn.addEventListener('click', () => {
            currentView = 'table';
            tableViewBtn.classList.add('active');
            jsonViewBtn.classList.remove('active');
            updateDisplay();
        });

        // è¡¨æ ¼ç¯©é¸
        tableFilter.addEventListener('input', filterTable);

        // äº‹ä»¶ï¼šé€å‡ºè«‹æ±‚
        document.getElementById('go').addEventListener('click', () => run(sel.value));

        // å®‰å…¨çš„ HTML escapeï¼ˆé¿å…å°‘æ•¸ API å›å‚³å« HTML å­—å…ƒæ™‚å½±éŸ¿æ¸²æŸ“ï¼‰
        function escapeHtml(str) {
            return String(str)
                .replaceAll('&', '&amp;')
                .replaceAll('<', '&lt;')
                .replaceAll('>', '&gt;')
                .replaceAll('"', '&quot;')
                .replaceAll("'", '&#39;');
        }

        load();
    </script>
</body>

</html>
é€™ç‰ˆåšäº†ä»€éº¼ï¼ˆé‡é»ï¼‰
å›ºå®šå®¹å™¨é«˜åº¦ + æ»¾å‹•æ²è»¸ï¼šmax-height: 70vh; overflow: auto;ï¼ˆJSON èˆ‡è¡¨æ ¼éƒ½ç”Ÿæ•ˆï¼‰ã€‚

è¡¨é ­ç½®é ‚ï¼šthead th { position: sticky; top: 0; } é•·åˆ—è¡¨ç€è¦½æ›´çœåŠ›ã€‚

é•·ç¶²å€/å¤šæ¬„ä½å‹å–„ï¼šä¸€èˆ¬æ¬„ä½é è¨­ä¸æ›è¡Œï¼‹çœç•¥è™Ÿï¼›URL æ¬„å…è¨±æ–·è¡Œã€ä¿ç•™ç­‰å¯¬å­—é«”ã€‚

æ°´å¹³æ²å‹•ï¼šæ¬„å¤ªå¤šæ™‚è‡ªå‹•å¯æ©«å‘æ²å‹•ï¼Œé¿å…æ“ çˆ†ã€‚

å¾®èª¿ listUrlï¼šé è¨­æŠ“åŒè³‡æ–™å¤¾çš„ ./api-list.jsonï¼Œæ¯”è¼ƒç›´è¦ºã€‚

è¦ä¸è¦æˆ‘å†å¹«ä½ åŠ ä¸€å€‹ã€Œå°å‡ºç›®å‰è¡¨æ ¼ç‚º CSVã€çš„å°æŒ‰éˆ•ï¼Œè®“ä½ æŠŠä»»ä¸€ API çš„çµæœä¸€éµå­˜æª”ï¼Ÿé€™å°ä½ ç•¶æ²–/å›æ¸¬è³‡æ–™æ•´ç†æœƒå¾ˆå¯¦ç”¨ã€‚


è³‡æ–™ä¾†æº
ä½ èªªï¼š
æˆ‘æƒ³è¦é©åˆæ‰‹æ©ŸæŸ¥é–±çš„RWDæ•ˆæœ
ChatGPT èªªï¼š

å·²æ€è€ƒ 14s
å¤ªæ‡‚ä½ äº†â€”æ‰‹æ©Ÿä¸Šä¸€æ»‘åˆ°åº•å»çœ‹ä¸åˆ°é‡é»æœ€ç…©ã€‚ä¸‹é¢æˆ‘æŠŠä½ çš„ index.html ç›´æ¥å‡ç´šæˆã€Œè¡Œå‹•è£ç½®å„ªå…ˆã€çš„ RWD ç‰ˆï¼š

çª„è¢å¹•è‡ªå‹•è®Šã€Œå¡ç‰‡å †ç–Šè¦–åœ–ã€ï¼ˆæ¯åˆ—ä¸€å¼µå¡ï¼Œæ¬„åâ†’æ¨™ç±¤ï¼‰

æ©«å‘å¾ˆå¤šæ¬„æ™‚ç¶­æŒå¯å·¦å³æ»‘å‹•è¡¨æ ¼

è¡¨é ­ç½®é ‚ã€è§¸æ§é †æš¢ã€å­—ç´š/å¯†åº¦å¯èª¿ã€é•·ç¶²å€ä¸çˆ†ç‰ˆ

ä¿ç•™ä½ çš„ JSON/è¡¨æ ¼åˆ‡æ›èˆ‡ç¯©é¸åŠŸèƒ½ï¼ˆç¨‹å¼é‚è¼¯ä¸è®Šï¼‰

æŠŠä¸‹æ–¹æ•´ä»½ç›´æ¥è¦†è“‹ä½ çš„æª”æ¡ˆå³å¯ã€‚

<!doctype html>
<html lang="zh-Hant">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>API Dropdown Demo Â· RWD</title>
  <style>
    /* ===== åŸºæœ¬è¨­å®šï¼šè¡Œå‹•è£ç½®å„ªå…ˆ ===== */
    :root{
      --radius: 12px;
      --border: #e5e7eb;
      --muted: #6b7280;
      --primary: #0a58ca;
      --bg-dark: #111;
      --txt-green: #0f0;
      --mono: ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans TC', Arial, sans-serif;
      margin: 0; padding: 16px;
      background: #fafafa;
      color: #111827;
    }

    h1 { font-size: clamp(18px, 4vw, 22px); margin: 0 0 8px; }
    .muted { color: var(--muted); font-size: 12px; }

    /* ===== æ§åˆ¶åˆ—ï¼ˆRWDã€é»åœ¨ä¸Šæ–¹ï¼‰ ===== */
    .toolbar {
      position: sticky; top: 0; z-index: 10;
      background: #fff;
      padding: 8px; margin: 12px -8px 8px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      display: grid; gap: 8px;
      grid-template-columns: 1fr;
    }
    .row {
      display: grid; gap: 8px;
      grid-template-columns: 1fr;
    }
    .row > * {
      width: 100%;
    }
    input[type=text], select, button {
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 10px;
      font-size: 14px;
      background: #fff;
    }
    .btn {
      background: #fff; cursor: pointer;
      transition: background .15s ease, color .15s ease, border-color .15s ease;
    }
    .btn.primary { background: var(--primary); color:#fff; border-color: var(--primary); }
    .controls-inline {
      display: flex; flex-wrap: wrap; gap: 8px; align-items: center;
    }
    .chip {
      display:inline-flex; align-items:center; gap:6px;
      border:1px solid var(--border); border-radius:999px;
      padding:6px 10px; background:#fff; font-size:12px;
    }
    .toggle-group button {
      padding:6px 12px; border-radius:999px; border:1px solid var(--border);
      background:#fff; font-size:12px; cursor:pointer;
    }
    .toggle-group .active { background:#111827; color:#fff; border-color:#111827; }

    /* ===== è¼¸å‡ºå®¹å™¨ï¼ˆJSON/è¡¨æ ¼å…±ç”¨ï¼‰ ===== */
    .output-container {
      background: var(--bg-dark); color: var(--txt-green);
      border-radius: var(--radius); padding: 12px; margin-top: 8px;
      max-height: 70vh; overflow: auto;
      -webkit-overflow-scrolling: touch;
      border: 1px solid #000;
    }
    .json-display {
      font-family: var(--mono);
      font-size: 13px; line-height: 1.5; white-space: pre;
      overflow-wrap: anywhere;
    }

    /* ===== è¡¨æ ¼è¦–åœ–ï¼ˆæ¡Œé¢ & å¹³æ¿ï¼‰ ===== */
    .table-view {
      background:#fff; color:#111827;
      border:1px solid var(--border); border-radius: var(--radius);
      overflow: hidden;
    }
    .table-scroller {
      overflow:auto; max-height: 70vh; -webkit-overflow-scrolling: touch;
    }
    table {
      width: max(100%, 960px);
      border-collapse: collapse; font-size: 13px; table-layout: auto;
    }
    th, td {
      padding: 10px 12px; border-bottom: 1px solid #f1f5f9;
      white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
      vertical-align: top;
    }
    thead th {
      position: sticky; top: 0; z-index: 1;
      background: #f8fafc; color:#334155; font-weight:600;
      border-bottom: 1px solid #e2e8f0;
    }
    tbody tr:hover { background: #f9fafb; }
    .url-cell { font-family: var(--mono); font-size: 11px; color:#0a58ca; white-space: normal; word-break: break-all; max-width: 560px; }
    .name-cell { font-weight: 500; }
    .id-cell { font-family: var(--mono); color:#6b7280; font-size:11px; }

    /* ===== å¯†åº¦ï¼ˆå­—ç´š/é–“è·ï¼‰åˆ‡æ› ===== */
    .dense th, .dense td { padding: 6px 8px; font-size: 12px; }
    .dense .url-cell { font-size: 10.5px; }

    /* ===== æ¥µçª„è¢å¹•ï¼šè‡ªå‹•ã€Œå¡ç‰‡å †ç–Šè¦–åœ–ã€ =====
       å°‡è¡¨æ ¼è½‰ç‚ºæ¯åˆ—ä¸€å¼µå¡ç‰‡ï¼ˆæ¬„åâ†’å·¦å´æ¨™ç±¤ï¼‰
    */
    @media (max-width: 520px) {
      .output-container { padding: 0; background: transparent; border: none; }
      .table-view { border: none; background: transparent; }
      .table-scroller { max-height: none; overflow: visible; }
      table, thead { display: none; }  /* éš±è—å‚³çµ±è¡¨æ ¼ */
      .cards {
        display: grid; gap: 10px; margin-top: 8px;
      }
      .card {
        background:#fff; border:1px solid var(--border); border-radius: var(--radius);
        padding: 12px;
      }
      .kv { display:grid; grid-template-columns: 36% 1fr; gap:6px 10px; }
      .k { color:#475569; font-size:12px; }
      .v { font-size:13px; overflow-wrap:anywhere; }
      .v.mono { font-family: var(--mono); font-size:12px; color:#0a58ca; }
      .card + .card { margin-top: 0; }
      .toolbar { margin: 8px -8px 0; border-left: none; border-right: none; border-radius: 0; }
    }

    /* å¹³æ¿ä»¥ä¸Šè®“å·¥å…·åˆ—æ›´å¯¬é¬† */
    @media (min-width: 640px) {
      .toolbar { grid-template-columns: 1fr auto; align-items: center; }
      .row { grid-template-columns: 1fr 1fr auto; }
    }
    @media (min-width: 1024px) {
      body { padding: 24px; }
      .row { grid-template-columns: 1fr 1fr 120px; }
    }
  </style>
</head>

<body>
  <h1>API Dropdown Demo</h1>
  <p class="muted">Workerï¼š<code>https://cors-proxy.s01yg3642.workers.dev/</code> ï½œ è³‡æ–™ï¼š<code>api-list.json</code></p>

  <!-- å·¥å…·åˆ—ï¼šé—œéµå­—ã€ä¸‹æ‹‰ã€Fetchï¼›è¦–åœ–/å¯†åº¦/æ›è¡Œ -->
  <div class="toolbar">
    <div class="row">
      <input id="q" type="text" placeholder="è¼¸å…¥é—œéµå­—ç¯©é¸ï¼ˆåç¨±æˆ–ç¶²å€ï¼‰" />
      <select id="sel"></select>
      <button id="go" class="btn primary">Fetch</button>
    </div>
    <div class="controls-inline">
      <div class="toggle-group" role="tablist" aria-label="View Toggle">
        <button id="jsonView" class="active" aria-selected="true">JSON æª¢è¦–</button>
        <button id="tableView" aria-selected="false">è¡¨æ ¼æª¢è¦–</button>
      </div>

      <label class="chip">
        <input type="checkbox" id="wrapToggle" />
        å¤šè¡Œæ›è¡Œ
      </label>

      <label class="chip">
        å¯†åº¦
        <select id="density">
          <option value="normal">ä¸€èˆ¬</option>
          <option value="dense">ç·Šæ¹Š</option>
        </select>
      </label>

      <span class="muted" id="tableStats"></span>
    </div>
  </div>

  <!-- ç¯©é¸ï¼ˆåƒ…è¡¨æ ¼è¦–åœ–é¡¯ç¤ºï¼‰ -->
  <div class="controls-inline" id="filterControls" style="display:none; margin: 8px 0;">
    <input id="tableFilter" type="text" placeholder="ç¯©é¸è¡¨æ ¼å…§å®¹..." />
  </div>

  <!-- è¼¸å‡ºå®¹å™¨ -->
  <div class="output-container">
    <div id="out" class="json-display">// ç­‰å¾…è«‹æ±‚ä¸­â€¦</div>
  </div>

  <script type="module">
    const WORKER = "https://cors-proxy.s01yg3642.workers.dev/";
    const listUrl = "./api-list.json"; /* è‹¥ä½ çš„æª”æ¡ˆåœ¨åˆ¥è™•ï¼Œæ”¹é€™è£¡å³å¯ */

    const toProxy = (u) => WORKER + "?url=" + encodeURIComponent(u);

    const out = document.getElementById('out');
    const sel = document.getElementById('sel');
    const q = document.getElementById('q');
    const jsonViewBtn = document.getElementById('jsonView');
    const tableViewBtn = document.getElementById('tableView');
    const filterControls = document.getElementById('filterControls');
    const tableFilter = document.getElementById('tableFilter');
    const tableStats = document.getElementById('tableStats');
    const density = document.getElementById('density');
    const wrapToggle = document.getElementById('wrapToggle');

    let items = [];
    let currentData = null;
    let currentView = 'json';
    let denseMode = false;
    let wrapMode = false;

    function fill(list) {
      sel.innerHTML = "";
      for (const it of list) {
        const o = document.createElement('option');
        o.value = it.url;
        o.textContent = (it.category ? `[${it.category}] ` : "") + it.name;
        sel.appendChild(o);
      }
    }

    async function load() {
      const res = await fetch(listUrl);
      const data = await res.json();
      items = data.items || [];
      fill(items);
      if (items.length) await run(items[0].url);
    }

    q.addEventListener('input', () => {
      const s = q.value.trim().toLowerCase();
      if (!s) return fill(items);
      const f = items.filter(it =>
        (it.name || "").toLowerCase().includes(s) ||
        (it.url || "").toLowerCase().includes(s)
      );
      fill(f);
    });

    const isArrayOfObjects = (data) =>
      Array.isArray(data) && data.length > 0 && typeof data[0] === 'object' && data[0] !== null;

    function renderCards(data){
      // æ¥µçª„è¢å¹•çš„å¡ç‰‡å †ç–Šè¦–åœ–
      const headers = Object.keys(data[0] ?? {});
      const cards = data.map(row => {
        const kvs = headers.map(h => {
          const raw = row[h] ?? '';
          const val = String(raw);
          const isUrl = /url|link/i.test(h);
          const isId  = /(^id$|_id$)/i.test(h);
          const mono = isUrl || isId ? ' mono' : '';
          return `<div class="kv">
            <div class="k">${escapeHtml(h)}</div>
            <div class="v${mono}">${escapeHtml(val)}</div>
          </div>`;
        }).join('');
        return `<div class="card" role="article" aria-label="è³‡æ–™åˆ—">${kvs}</div>`;
      }).join('');
      return `<div class="cards">${cards}</div>`;
    }

    function renderTable(data) {
      if (!isArrayOfObjects(data)) {
        return '<div class="json-display">' + escapeHtml(JSON.stringify(data, null, 2)) + '</div>';
      }
      const headers = Object.keys(data[0]);

      const tableHtml = `
        <div class="table-view ${denseMode ? 'dense' : ''}" role="region" aria-label="è³‡æ–™è¡¨">
          <div class="table-scroller">
            <table>
              <thead><tr>${headers.map(h => `<th>${escapeHtml(h)}</th>`).join('')}</tr></thead>
              <tbody>
                ${data.map(row => `
                  <tr>
                    ${headers.map(header => {
                      const raw = row[header] ?? '';
                      const value = String(raw);
                      const hLower = header.toLowerCase();
                      let cellClass = '';
                      if (hLower.includes('url') || hLower.includes('link')) cellClass = 'url-cell';
                      else if (hLower.includes('name') || hLower.includes('title')) cellClass = 'name-cell';
                      else if (hLower === 'id' || hLower.endsWith('_id')) cellClass = 'id-cell';

                      const displayValue = wrapMode ? value : (value.length > 180 ? value.slice(0, 180) + 'â€¦' : value);
                      return `<td class="${cellClass}" title="${escapeHtml(value)}" data-label="${escapeHtml(header)}">${escapeHtml(displayValue)}</td>`;
                    }).join('')}
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>
        </div>
      `;

      // å¦å¤–è¼¸å‡ºè¡Œå‹•å¡ç‰‡ç‰ˆï¼ˆåªåœ¨ CSS æ¥µçª„æ™‚é¡¯ç¤ºï¼‰
      const cardsHtml = renderCards(data);
      return tableHtml + cardsHtml;
    }

    function updateDisplay() {
      if (currentData == null) return;

      if (currentView === 'table' && isArrayOfObjects(currentData)) {
        document.querySelector('.output-container').classList.add('table-host');
        out.className = ''; // è§£é™¤ JSON å­—å‹
        out.innerHTML = renderTable(currentData);
        filterControls.style.display = 'flex';
        updateTableStats(currentData);
      } else {
        document.querySelector('.output-container').classList.remove('table-host');
        filterControls.style.display = 'none';
        out.className = 'json-display';
        const displayText = typeof currentData === 'string'
          ? currentData
          : JSON.stringify(currentData, null, 2);
        out.textContent = displayText;
      }
    }

    function updateTableStats(data) {
      if (isArrayOfObjects(data)) {
        tableStats.textContent = `å…± ${data.length} ç­†ï¼Œ${Object.keys(data[0]).length} æ¬„`;
      } else {
        tableStats.textContent = '';
      }
    }

    function filterTable() {
      if (!currentData || !isArrayOfObjects(currentData)) return;
      const filterText = tableFilter.value.toLowerCase();
      if (!filterText) { updateDisplay(); return; }

      const filteredData = currentData.filter(row =>
        Object.values(row).some(value => String(value).toLowerCase().includes(filterText))
      );

      out.innerHTML = renderTable(filteredData);
      tableStats.textContent = `é¡¯ç¤º ${filteredData.length} / ${currentData.length} ç­†`;
    }

    async function run(url) {
      out.textContent = "// Fetching...\n" + url;
      try {
        const res = await fetch(toProxy(url));
        const ct = res.headers.get('content-type') || "";
        if (ct.includes("application/json")) currentData = await res.json();
        else currentData = await res.text();
        updateDisplay();
      } catch (e) {
        currentData = "Error: " + e.message;
        updateDisplay();
      }
    }

    // è¦–åœ–åˆ‡æ›
    jsonViewBtn.addEventListener('click', () => {
      currentView = 'json';
      jsonViewBtn.classList.add('active');
      jsonViewBtn.setAttribute('aria-selected','true');
      tableViewBtn.classList.remove('active');
      tableViewBtn.setAttribute('aria-selected','false');
      updateDisplay();
    });
    tableViewBtn.addEventListener('click', () => {
      currentView = 'table';
      tableViewBtn.classList.add('active');
      tableViewBtn.setAttribute('aria-selected','true');
      jsonViewBtn.classList.remove('active');
      jsonViewBtn.setAttribute('aria-selected','false');
      updateDisplay();
    });

    // å¯†åº¦ / æ›è¡Œ
    density.addEventListener('change', () => {
      denseMode = density.value === 'dense';
      updateDisplay();
    });
    wrapToggle.addEventListener('change', () => {
      wrapMode = wrapToggle.checked;
      updateDisplay();
    });

    // è¡¨æ ¼ç¯©é¸
    tableFilter.addEventListener('input', filterTable);

    // é€å‡ºè«‹æ±‚
    document.getElementById('go').addEventListener('click', () => run(sel.value));

    // HTML escape
    function escapeHtml(str) {
      return String(str)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'","&#39;");
    }

    load();
  </script>
</body>
</html>
è£œå……ï¼ˆå¦‚æœä½ è¦æ›´å¤šï¼‰
æƒ³åœ¨æ‰‹æ©Ÿä¸Šä¸€éµåŒ¯å‡º CSVæˆ–è¤‡è£½ç›®å‰ API çš„ URLï¼Ÿæˆ‘å¯ä»¥å¹«ä½ åœ¨å·¥å…·åˆ—å†åŠ å…©é¡†æŒ‰éˆ•ã€‚

è‹¥æœ‰ç‰¹å®šæ¬„ä½ï¼ˆä¾‹å¦‚ idã€urlï¼‰æƒ³åœ¨è¶…å°è¢å¹•éš±è—ï¼Œä¹Ÿå¯åŠ ä¸Šæ¬„ä½å¯è¦‹æ€§åˆ‡æ›ï¼›æˆ– 480px ä»¥ä¸‹è‡ªå‹•åªé¡¯ç¤ºã€Œåç¨±ã€URLã€å…©æ¬„ï¼Œå…¶é¤˜æ”¶é€²å±•é–‹å€å¡Šã€‚

æœ‰å¤šç¨® RWD åšæ³•ï¼›ä¸Šé¢é€™ç‰ˆåŒæ™‚ä¿ç•™ã€Œå¯æ°´å¹³æ²å‹•çš„è¡¨æ ¼ã€èˆ‡ã€Œæ¥µçª„è¢å¹•çš„å¡ç‰‡å †ç–Šã€â€”â€”å°±ä½¿ç”¨é«”é©—è€Œè¨€ï¼Œé€™é€šå¸¸æ˜¯æœ€ç©©å¦¥çš„çµ„åˆï¼ˆä¹Ÿæ˜¯æˆ‘çµ¦ä½ çš„ã€Œæœ€ä½³è§£ã€ï¼‰ã€‚å¦‚æœä½ åå¥½åªç”¨å…¶ä¸­ä¸€ç¨®è¦–åœ–ï¼Œæˆ‘ä¹Ÿèƒ½å¹«ä½ ç°¡åŒ–ã€‚


è³‡æ–™ä¾†æº



æœªé¸æ“‡ä»»ä½•æª”æ¡ˆæœªé¸æ“‡ä»»ä½•æª”æ¡ˆ
ChatGPT å¯èƒ½æœƒå‡ºéŒ¯ã€‚è«‹æŸ¥æ ¸é‡è¦è³‡è¨Šã€‚
